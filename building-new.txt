bazel test \
//stratum:all \
//stratum/glue:all \
//stratum/glue/gtl/...:all \
//stratum/glue/net_util/...:all \
//stratum/glue/status/...:all \
//stratum/lib:all \
//stratum/lib/channel:channel \
//stratum/lib/channel:channel_mock \
//stratum/lib/channel:test_main \
//stratum/lib/security:all \
//stratum/lib/statemachine:state_machine \
//stratum/lib/test_utils:all \
//stratum/portage:all \
//stratum/public/lib:all \
//stratum/public/proto:all \
//stratum/public/proto/openconfig/...:all \
//stratum/hal/lib/p4:all \
//stratum/hal/lib/common:all \
//stratum/hal/lib/pi:all \
//stratum/hal/lib/phal:udev_mock \
//stratum/hal/lib/phal:udev_event_handler_test \
//stratum/hal/lib/phal:udev_event_handler_mock \
//stratum/hal/lib/phal:udev \
//stratum/hal/lib/phal:udev_interface \
//stratum/hal/lib/phal:threadpool_interface_mock \
//stratum/hal/lib/phal:system_interface_mock \
//stratum/hal/lib/phal:regex_datasource_test \
//stratum/hal/lib/phal:regex_datasource \
//stratum/hal/lib/phal:reader_writer_datasource_test \
//stratum/hal/lib/phal:reader_writer_datasource \
//stratum/hal/lib/phal:phal_sim \
//stratum/hal/lib/phal:system_real \
//stratum/hal/lib/phal:fixed_layout_datasource_test \
//stratum/hal/lib/phal:fixed_stringsource \
//stratum/hal/lib/phal:fixed_layout_datasource \
//stratum/hal/lib/phal:filepath_stringsource \
//stratum/hal/lib/phal:stringsource_interface \
//stratum/hal/lib/phal:buffer_tools \
//stratum/hal/lib/phal:attribute_group_test \
//stratum/hal/lib/phal/test:test_proto \
//stratum/hal/lib/phal/test:test_proto.pb \
//stratum/hal/lib/phal:test_util \
//stratum/hal/lib/phal:managed_attribute_mock \
//stratum/hal/lib/phal:datasource_mock \
//stratum/hal/lib/phal:system_fake \
//stratum/hal/lib/phal:attribute_group_mock \
//stratum/hal/lib/phal:attribute_database_mock \
//stratum/hal/lib/phal:attribute_database \
//stratum/hal/lib/phal:udev_event_handler \
//stratum/hal/lib/phal:system_interface \
//stratum/hal/lib/phal:phal_proto \
//stratum/hal/lib/phal:phal_proto.pb \
//stratum/hal/lib/phal:dummy_threadpool \
//stratum/hal/lib/phal:attribute_group \
//stratum/hal/lib/phal:threadpool_interface \
//stratum/hal/lib/phal:datasource \
//stratum/hal/lib/phal:managed_attribute \
//stratum/hal/lib/phal:attribute_database_interface \
//stratum/hal/lib/phal:db_proto \
//stratum/hal/lib/phal:db_proto.pb \
//stratum/hal/lib/phal/onlp:onlp_wrapper \
//stratum/hal/lib/phal/onlp:onlp_wrapper_mock \
//stratum/hal/lib/phal/onlp:onlp_wrapper_fake \
//stratum/hal/lib/phal/onlp:onlpphal \
//stratum/hal/lib/phal/onlp:onlp_event_handler \
//stratum/hal/lib/phal/onlp:onlp_event_handler_mock \
//stratum/hal/lib/phal/onlp:onlp_event_handler_test \
//stratum/hal/lib/phal/onlp:sfp_datasource \
//stratum/hal/lib/phal/onlp:sfp_datasource_test \
//stratum/hal/lib/phal/onlp:fan_datasource \
//stratum/hal/lib/phal/onlp:fan_datasource_test \
//stratum/hal/lib/bcm:bcm_proto \
//stratum/hal/lib/bcm:constants \
//stratum/hal/lib/bcm:bcm_sdk_interface \
//stratum/hal/lib/bcm:bcm_serdes_db_manager \
//stratum/hal/lib/bcm:bcm_serdes_db_manager_mock \
//stratum/hal/lib/bcm:bcm_serdes_db_manager_test \
//stratum/hal/lib/bcm:macros \
//stratum/hal/lib/bcm:utils \
//stratum/hal/lib/bcm:utils_test \

# Build BMv2 if the library is present
[[ -v BMV2_INSTALL ]] && bazel build //stratum/hal/bin/bmv2:stratum_bmv2

exit 0

# Not building

//stratum/hal/lib/phal:phal_cli \
//stratum/hal/lib/phal:google_phal_test \
//stratum/hal/lib/phal:google_phal \
//stratum/hal/lib/phal:attribute_database_test \

//stratum/hal/lib/phal/onlp:onlphal_test \

//stratum/public/yang:all
//stratum/lib/statemachine:all

//stratum/hal/lib/bcm:bcm_global_vars \
//stratum/hal/lib/bcm:bcm_chassis_manager_mock \
//stratum/hal/lib/bcm:bcm_chassis_manager \
//stratum/hal/lib/bcm:bcm_chassis_manager_test \

//stratum/hal/lib/bcm:pipeline_processor \
//stratum/hal/lib/bcm:bcm_table_manager \
//stratum/hal/lib/bcm:bcm_table_manager_mock \
//stratum/hal/lib/bcm:bcm_table_manager_test \
//stratum/hal/lib/bcm:bcm_acl_manager_mock \
//stratum/hal/lib/bcm:bcm_acl_manager \
//stratum/hal/lib/bcm:bcm_acl_manager_test \

//stratum/hal/lib/bcm:pipeline_processor_test \
//stratum/hal/lib/bcm:macros_test \
//stratum/hal/lib/bcm:bcm_udf_manager_test \
//stratum/hal/lib/bcm:bcm_udf_manager \
//stratum/hal/lib/bcm:bcm_switch_test \
//stratum/hal/lib/bcm:bcm_switch \
//stratum/hal/lib/bcm:bcm_sdk_sim \
//stratum/hal/lib/bcm:bcm_sdk_wrapper \
//stratum/hal/lib/bcm:bcm_node_test \
//stratum/hal/lib/bcm:bcm_packetio_manager_mock \
//stratum/hal/lib/bcm:bcm_l3_manager_test \
//stratum/hal/lib/bcm:bcm_l3_manager_mock \
//stratum/hal/lib/bcm:bcm_l2_manager_test \
//stratum/hal/lib/bcm:bcm_l2_manager_mock \
//stratum/hal/lib/bcm:bcm_flow_table_test \
//stratum/hal/lib/bcm:bcm_diag_shell \
//stratum/hal/lib/bcm:sdk_build_undef \
//stratum/hal/lib/bcm:bcm_chassis_ro_mock \
//stratum/hal/lib/bcm:bcm_node_mock \
//stratum/hal/lib/bcm:bcm_sdk_mock \
//stratum/hal/lib/bcm:bcm_node \
//stratum/hal/lib/bcm:bcm_packetio_manager \
//stratum/hal/lib/bcm:bcm_l3_manager \
//stratum/hal/lib/bcm:bcm_l2_manager \
//stratum/hal/lib/bcm:bcm_chassis_ro_interface \
//stratum/hal/lib/bcm:acl_table_test \
//stratum/hal/lib/bcm:test_main \
//stratum/hal/lib/bcm:acl_table \
//stratum/hal/lib/bcm:bcm_flow_table \
//stratum/hal/lib/bcm:bcm_tunnel_manager \
//stratum/hal/lib/bcm:bcm_tunnel_manager_mock \
//stratum/hal/lib/bcm:bcm_tunnel_manager_test \

//stratum/hal/lib/bcm:bcm_packetio_manager_test \

//stratum/hal/lib/bcm:bcm_sdk_proxy_test
//stratum/hal/lib/bcm:bcm_sdk_proxy
